ğŸ“„ notes.txt â€” Game Boy Emulator Project Outline
==================================================

ğŸ¯ GOAL:
Build a Game Boy emulator in C with clean, assert-heavy, debuggable, modular code.

--------------------------------------------------
ğŸ“ CODING PRACTICES:
- Use assertions for all function parameters, memory accesses, return values.
- Run with address sanitizer.
- Use memory leak checker (valgrind).
- Break code into small, testable functions. (60 lines)
- functions must return something (no void) to validate with assertions
- Comment every non-obvious block. No magic numbers. Define them.

- Memory management: track allocations, frees, watch out for leaks.
- Log erroros and sates

--------------------------------------------------
ğŸ“¦ PROJECT STRUCTURE:
.
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.c
â”‚   â”œâ”€â”€ cpu.c / cpu.h
â”‚   â”œâ”€â”€ memory.c / memory.h
â”‚   â”œâ”€â”€ gpu.c / gpu.h
â”‚   â”œâ”€â”€ input.c / input.h
â”‚   â”œâ”€â”€ audio.c / audio.h (optional)
â”‚   â”œâ”€â”€ rom.c / rom.h
â”‚   â””â”€â”€ utils.c / utils.h
â”œâ”€â”€ include/
â”‚   â””â”€â”€ common.h
â”œâ”€â”€ res/
â”‚   â””â”€â”€ test_rom.gb
â”œâ”€â”€ Makefile
â”œâ”€â”€ debug.log
â””â”€â”€ notes.txt

--------------------------------------------------
ğŸ› ï¸ TASK LIST:

build logging and assrtison logic 
sdl2 implementation 
makefile ? 



[ ] SETUP:
    [ ] Makefile with warnings and sanitizers (-Wall -Wextra -pedantic -fsanitize=address)
    [ ] SDL2 setup for graphics and input

[ ] MEMORY:
    [ ] Implement 64KB memory map array
    [ ] Define memory regions (ROM, VRAM, WRAM, etc.)
    [ ] Load ROM into memory at correct address
    [ ] Assertions for valid memory reads/writes
    [ ] Logging for invalid access

[ ] CPU:
    [ ] Define CPU registers struct (AF, BC, DE, HL, SP, PC)
    [ ] Define flags (Z, N, H, C)
    [ ] Create CPU cycle function: fetch â†’ decode â†’ execute
    [ ] Implement a few basic opcodes (NOP, LD, INC, DEC)
    [ ] Assertions on each opcode execution: valid opcode, correct flag changes
    [ ] Build opcode table array of function pointers

[ ] GPU:
    [ ] Implement basic LCD control registers
    [ ] Create a 160x144 framebuffer array
    [ ] Implement background rendering (tilemap rendering)
    [ ] Render to SDL window
    [ ] Add scanline / vsync emulation (basic)

[ ] INPUT:
    [ ] Map keyboard keys to joypad buttons
    [ ] Implement joypad register mapping
    [ ] Read input state into memory-mapped IO

[ ] DEBUGGING:
    [ ] Create log system (debug.log)
    [ ] Log CPU state on each instruction
    [ ] Log memory writes / reads
    [ ] Build CLI debug commands: dump memory, set breakpoints

[ ] TEST ROM:
    [ ] Load and run Blargg's test ROMs for CPU instruction verification
    [ ] Log test progress and results

[ ] THREADING (Optional):
    [ ] Move rendering and emulation loop to separate threads
    [ ] Assertions for thread safety
    [ ] Mutexes for shared state (input, framebuffer)

[ ] MEMORY CAP:
    [ ] Track dynamic memory usage
    [ ] Enforce hard limit (e.g., 100KB if possible)
    [ ] Assertions on malloc/calloc failure or over-capacity

[ ] PREPROCESSOR / MACROS:
    [ ] Create macros for common assertions and logs
        e.g., #define ASSERT_OK(x) assert(x != NULL)
    [ ] Use macros for opcode table generation if needed

[ ] AUDIO (Optional):
    [ ] Implement square wave generators
    [ ] Map audio registers
    [ ] Connect to SDL audio callback

[ ] SAVE STATES (Optional):
    [ ] Serialize CPU, memory, GPU state to file
    [ ] Load from save file
